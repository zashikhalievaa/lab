# Отчет по лабораторной работе №2  
**Дисциплина:** Администрирование сетевых подсистем  
**Студент:** Шихалиева Зурият Арсеновна  

---

## Постановка задач

1. Установить на виртуальной машине `server` DNS-сервер `bind` и `bind-utils`.
2. Сконфигурировать на виртуальной машине `server` кэширующий DNS-сервер.
3. Сконфигурировать на виртуальной машине `server` первичный DNS-сервер.
4. При помощи утилит `dig` и `host` проанализировать работу DNS-сервера.
5. Написать скрипт для Vagrant, фиксирующий действия по установке и конфигурированию DNS-сервера во внутреннем окружении машины `server`.

---

## Выполнение работы

### 1. Установка bind и bind-utils
Установлены пакеты `bind` и `bind-utils` из репозитория EPEL для Enterprise Linux 9.

![Установка пакетов](image1.jpg)

---

### 2. Настройка DNS-сервера по умолчанию
Для подключения `eth0` выполнены следующие команды через `nmcli`:

```bash
nmcli> remove ipv4.dns
nmcli> set ipv4.ignore-auto-dns yes
nmcli> set ipv4.dns 127.0.0.1
nmcli> save
nmcli> quit
https://image2.jpg

После этого перезапущен NetworkManager и проверен файл /etc/resolv.conf:

bash
systemctl restart NetworkManager
cat /etc/resolv.conf
https://image3.jpg

3. Настройка направления DNS-запросов
В файл /etc/named.conf внесены изменения:

Добавлены адреса для прослушивания: 127.0.0.1 и any.

Разрешены запросы для сети 192.168.0.0/16.

https://image4.jpg

4. Настройка firewall
Разрешена работа с DNS через firewall:

bash
firewall-cmd --add-service=dns
firewall-cmd --add-service=dns --permanent
https://image5.jpg

5. Создание структуры каталогов и зон
Скопирован шаблон зон из /etc/named.rfc1912.zones в /etc/named.

Созданы каталоги для прямой и обратной зон:

bash
mkdir -p /var/named/master/fz
mkdir -p /var/named/master/rz
https://image6.jpg

Скопирован и переименован шаблон обратной зоны:

bash
cp /var/named/named.loopback /var/named/master/rz/
cd /var/named/master/rz/
mv named.loopback 192.168.1
https://image7.jpg

6. Настройка прав доступа
Изменены владельцы файлов для демона named:

bash
chown -R named:named /etc/named
chown -R named:named /var/named
https://image8.jpg

7. Настройка Vagrant для автоматического развертывания
В конфигурационный файл Vagrantfile добавлен вызов скрипта настройки DNS:

ruby
server.vm.provision "server_dns", 
  type: "shell", 
  preserve_order: true, 
  path: "provision/server/dns.sh"
https://image9.jpg

Вывод
В ходе лабораторной работы я приобрела практические навыки по установке и конфигурированию DNS-сервера, а также усвоила принципы работы системы доменных имен. Были выполнены все поставленные задачи, включая автоматизацию процесса развертывания с помощью Vagrant.